\hypertarget{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager}{}\section{eu.\+h2020.\+symbiote.\+communication.\+Rabbit\+Manager Class Reference}
\label{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager}\index{eu.\+h2020.\+symbiote.\+communication.\+Rabbit\+Manager@{eu.\+h2020.\+symbiote.\+communication.\+Rabbit\+Manager}}


Collaboration diagram for eu.\+h2020.\+symbiote.\+communication.\+Rabbit\+Manager\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=251pt]{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_a30abf6a670122eb22a8105a206858616}{init\+Communication} ()
\item 
String \hyperlink{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_a822ebbed01755311ca9038bb7fa43591}{send\+Rpc\+Message} (String exchange\+Name, String routing\+Key, String message)
\item 
Map$<$ String, String $>$ \hyperlink{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_a56ce4aea24a797b642a52a3071acf0cb}{send\+Resource\+Urls\+Request} (\hyperlink{classeu_1_1h2020_1_1symbiote_1_1model_1_1ResourceUrlsRequest}{Resource\+Urls\+Request} request)
\item 
List$<$ \hyperlink{classeu_1_1h2020_1_1symbiote_1_1model_1_1Resource}{Resource} $>$ \hyperlink{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_ad61f8d511d62197ce15bc1e74a9f8e9c}{send\+Search\+Request} (\hyperlink{classeu_1_1h2020_1_1symbiote_1_1model_1_1QueryRequest}{Query\+Request} request)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Class used for all internal communication using Rabbit\+MQ A\+M\+QP implementation. It works as a Spring Bean, and should be used via autowiring. 

\hyperlink{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager}{Rabbit\+Manager} uses properties taken from Core\+Config\+Server to set up communication (exchange parameters, routing keys etc.) 

\subsection{Member Function Documentation}
\index{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager@{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager}!init\+Communication@{init\+Communication}}
\index{init\+Communication@{init\+Communication}!eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager@{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager}}
\subsubsection[{\texorpdfstring{init\+Communication()}{initCommunication()}}]{\setlength{\rightskip}{0pt plus 5cm}void eu.\+h2020.\+symbiote.\+communication.\+Rabbit\+Manager.\+init\+Communication (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_a30abf6a670122eb22a8105a206858616}{}\label{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_a30abf6a670122eb22a8105a206858616}
Method used to initialise Rabbit\+MQ connection and declare all required exchanges. This method should be called once, after bean initialization (so that properties from Core\+Config\+Server are obtained), but before using \hyperlink{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager}{Rabbit\+Manager} to send any message. \index{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager@{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager}!send\+Resource\+Urls\+Request@{send\+Resource\+Urls\+Request}}
\index{send\+Resource\+Urls\+Request@{send\+Resource\+Urls\+Request}!eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager@{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager}}
\subsubsection[{\texorpdfstring{send\+Resource\+Urls\+Request(\+Resource\+Urls\+Request request)}{sendResourceUrlsRequest(ResourceUrlsRequest request)}}]{\setlength{\rightskip}{0pt plus 5cm}Map$<$String, String$>$ eu.\+h2020.\+symbiote.\+communication.\+Rabbit\+Manager.\+send\+Resource\+Urls\+Request (
\begin{DoxyParamCaption}
\item[{{\bf Resource\+Urls\+Request}}]{request}
\end{DoxyParamCaption}
)}\hypertarget{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_a56ce4aea24a797b642a52a3071acf0cb}{}\label{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_a56ce4aea24a797b642a52a3071acf0cb}
Method used to send R\+PC request to get specified resources U\+R\+Ls. 

Upon querying symb\+Io\+Te using \hyperlink{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_ad61f8d511d62197ce15bc1e74a9f8e9c}{send\+Search\+Request(\+Query\+Request)}, user gets resource without their Resource Access Proxy\textquotesingle{}s U\+R\+Ls. It is necessary to obtain them from core Resource Access Monitor by supplying list of chosen resource I\+Ds.


\begin{DoxyParams}{Parameters}
{\em request} & request object containing I\+Ds of resources to get U\+R\+Ls \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
response map in form of \{\char`\"{}id1\char`\"{}\+:\char`\"{}\+U\+R\+L1\char`\"{}, \char`\"{}id2\char`\"{}\+:\char`\"{}\+U\+R\+L2\char`\"{}, ... \}, or null when timeout occurs 
\end{DoxyReturn}
\index{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager@{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager}!send\+Rpc\+Message@{send\+Rpc\+Message}}
\index{send\+Rpc\+Message@{send\+Rpc\+Message}!eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager@{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager}}
\subsubsection[{\texorpdfstring{send\+Rpc\+Message(\+String exchange\+Name, String routing\+Key, String message)}{sendRpcMessage(String exchangeName, String routingKey, String message)}}]{\setlength{\rightskip}{0pt plus 5cm}String eu.\+h2020.\+symbiote.\+communication.\+Rabbit\+Manager.\+send\+Rpc\+Message (
\begin{DoxyParamCaption}
\item[{String}]{exchange\+Name, }
\item[{String}]{routing\+Key, }
\item[{String}]{message}
\end{DoxyParamCaption}
)}\hypertarget{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_a822ebbed01755311ca9038bb7fa43591}{}\label{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_a822ebbed01755311ca9038bb7fa43591}
Method used to send message via R\+PC (Remote Procedure Call) pattern. In this implementation it covers asynchronous Rabbit communication with synchronous one, as it is used by conventional R\+E\+ST facade. Before sending a message, a temporary response queue is declared and its name is passed along with the message. When a consumer handles the message, it returns the result via the response queue. Since this is a synchronous pattern, it uses timeout of 20 seconds. If the response doesn\textquotesingle{}t come in that time, the method returns with null result.


\begin{DoxyParams}{Parameters}
{\em exchange\+Name} & name of the eschange to send message to \\
\hline
{\em routing\+Key} & routing key to send message to \\
\hline
{\em message} & message to be sent \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
response from the consumer or null if timeout occurs 
\end{DoxyReturn}
\index{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager@{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager}!send\+Search\+Request@{send\+Search\+Request}}
\index{send\+Search\+Request@{send\+Search\+Request}!eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager@{eu\+::h2020\+::symbiote\+::communication\+::\+Rabbit\+Manager}}
\subsubsection[{\texorpdfstring{send\+Search\+Request(\+Query\+Request request)}{sendSearchRequest(QueryRequest request)}}]{\setlength{\rightskip}{0pt plus 5cm}List$<${\bf Resource}$>$ eu.\+h2020.\+symbiote.\+communication.\+Rabbit\+Manager.\+send\+Search\+Request (
\begin{DoxyParamCaption}
\item[{{\bf Query\+Request}}]{request}
\end{DoxyParamCaption}
)}\hypertarget{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_ad61f8d511d62197ce15bc1e74a9f8e9c}{}\label{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_ad61f8d511d62197ce15bc1e74a9f8e9c}
Method used to send R\+PC request to query symb\+Io\+Te registry for resources.

Returned resources do not contain U\+R\+Ls to contact them. Another call to \hyperlink{classeu_1_1h2020_1_1symbiote_1_1communication_1_1RabbitManager_a56ce4aea24a797b642a52a3071acf0cb}{send\+Resource\+Urls\+Request(\+Resource\+Urls\+Request)} is needed to obtain U\+R\+Ls.


\begin{DoxyParams}{Parameters}
{\em request} & request object describing query parameters \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
response list of requested resources, or null when timeout occurs 
\end{DoxyReturn}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/main/java/eu/h2020/symbiote/communication/Rabbit\+Manager.\+java\end{DoxyCompactItemize}
